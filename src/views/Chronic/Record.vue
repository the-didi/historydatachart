<template>
    <div class="record-container">
        <div class="tables">
            <div class="title">
                <span>血压检测记录</span>
                <div class="button">下载全部</div>
            </div>
            <table>
                <tr>
                    <td>日期</td>
                    <td>时间</td>
                    <td>血压</td>
                    <td>心率</td>
                    <td>血氧</td>
                    <td>药物</td>
                    <td>达标情况</td>
                </tr>
                <tr v-for="item in recordEntity.bloodPressureRecordings">
                    <td>{{ item.createTime }}</td>
                    <td>{{ item.time }}</td>
                    <td>{{ item.bloodPressure }}</td>
                    <td>{{ item.heartRate }}</td>
                    <td>{{ item.bloodOxygen }}</td>
                    <td>{{ item.drug }}</td>
                    <td>{{ item.standard }}</td>
                </tr>
            </table>
            <div class="title">
                <span>血糖检测记录</span>
                <div class="button">下载全部</div>
            </div>
            <table>
                <tr>
                    <td>时间</td>
                    <td>指尖静脉血管</td>
                    <td>血压</td>
                    <td>心率</td>
                    <td>血氧</td>
                    <td>药物</td>
                    <td>达标情况</td>
                </tr>
                <tr v-for="item in recordEntity.glycemiaRecordings">
                    <td>{{ item.createTime }}</td>
                    <td>{{ item.glycemiaFasting }}</td>
                    <td>{{ item.bloodPressure }}</td>
                    <td>{{ item.heartRate }}</td>
                    <td>{{ item.oxygenSaturation }}</td>
                    <td>{{ item.glycemiaDrug }}</td>
                    <td>{{ item.standard }}</td>
                </tr>
            </table>
            <div class="title">
                <span>步数记录</span>
                <div class="button">下载全部</div>
            </div>
            <table>
                <tr>
                    <td>日期</td>
                    <td>步数</td>
                </tr>
                <tr v-for="item in recordEntity.stepRecrodings">
                    <td>{{ item.time }}</td>
                    <td>{{ item.step }}</td>
                </tr>
            </table>
            <div class="title">
                <span>教育参与记录</span>
                <div class="button">下载全部</div>
            </div>
            <div class="list">
                <div v-for="item in recordEntity.educationRecordings" class="item">
                    <span>{{ item.educationTime }}</span>
                    <span>{{ item.educationRecords }}</span>
                </div>
            </div>
        </div>
        <div class="background">
            <svg width="322" height="756" viewBox="0 0 322 756" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g opacity="0.5">
                    <path opacity="0.4"
                        d="M202.721 752.514C267.824 752.514 320.601 722.036 320.601 684.439C320.601 646.842 267.824 616.364 202.721 616.364C137.618 616.364 84.8408 646.842 84.8408 684.439C84.8408 722.036 137.618 752.514 202.721 752.514Z"
                        fill="#D6D8E5" />
                    <path
                        d="M300.16 166.02C301.525 177.78 315.56 228.6 312.55 245.995C309.54 263.39 261.695 292.51 261.695 292.51L255.22 262.69L281.785 236.825L274.61 187.44L300.16 166.02Z"
                        fill="#FFCEA9" />
                    <path
                        d="M263.024 115.97C267.693 113.801 272.997 113.422 277.926 114.906C282.856 116.39 287.069 119.633 289.764 124.02C296.764 135.745 304.184 175.785 304.814 182.68C304.814 182.68 294.909 196.4 280.069 194.09L263.024 115.97Z"
                        fill="#EDEDED" />
                    <path
                        d="M208.25 682.514C197.8 685.395 186.637 684.047 177.17 678.769C169.68 678.979 129.08 661.619 123.55 676.214C118.72 689.164 136.29 700.714 145.705 703.094C166.215 708.099 181.3 718.319 189.63 720.034C195.79 721.329 203.63 722.204 208.635 717.374C214.48 711.424 213.99 690.004 208.25 682.514Z"
                        fill="#38226D" />
                    <path
                        d="M189.63 716.359C181.405 714.609 166.215 704.389 145.705 699.419C137.83 697.529 124.25 688.919 122.885 678.629C121.065 690.389 136.885 700.854 145.705 702.954C166.215 707.959 181.3 718.179 189.63 719.894C195.79 721.189 203.63 722.064 208.635 717.234C209.901 715.82 210.823 714.129 211.33 712.299C208.276 714.612 204.725 716.184 200.959 716.887C197.193 717.591 193.314 717.412 189.63 716.359Z"
                        fill="#9C73FF" />
                    <path
                        d="M274.12 652.799C263.671 655.697 252.501 654.353 243.04 649.054C235.55 649.264 194.95 631.869 189.455 646.464C184.59 659.274 202.195 670.964 211.575 673.379C232.085 678.349 247.17 688.604 255.5 690.354C261.66 691.649 269.5 692.489 274.505 687.659C280.35 681.849 280 660.429 274.12 652.799Z"
                        fill="#38226D" />
                    <path
                        d="M255.501 686.784C247.276 685.034 232.086 674.814 211.576 669.844C203.701 667.954 190.121 659.344 188.931 649.054C187.111 660.814 202.931 671.279 211.576 673.379C232.086 678.349 247.171 688.604 255.501 690.354C261.661 691.649 269.501 692.489 274.506 687.659C275.758 686.235 276.678 684.548 277.201 682.724C274.146 685.038 270.595 686.609 266.829 687.313C263.063 688.016 259.185 687.838 255.501 686.784Z"
                        fill="#9C73FF" />
                    <path
                        d="M274.925 542.514C273.172 527.44 270.032 512.561 265.545 498.064C265.545 498.064 268.345 459.564 269.745 423.234C271.32 381.934 285.67 345.57 274.33 312.67L147 340.915C147 340.915 154.7 505.589 156.45 525.399C157.369 540.904 159.275 556.336 162.155 571.599C167.965 603.589 177.415 679.609 177.415 679.609C190.89 687.449 208.565 683.109 208.565 683.109C208.565 683.109 207.62 586.964 206.745 563.899C205.695 535.899 204.82 538.034 204.82 538.034L209.02 468.034L211.785 433.209C211.785 433.209 215.285 458.794 217.595 481.754C219.625 501.669 224.42 519.694 229.81 556.759C234.465 588.924 242.025 653.569 242.025 653.569C255.5 661.409 273.805 654.899 273.805 654.899C273.805 654.899 278.53 570.514 274.925 542.514Z"
                        fill="#8C50FF" />
                    <path
                        d="M256.305 116.635C246.61 117.125 239.365 119.61 238.14 116.635C237.124 111.616 236.388 106.545 235.935 101.445C237.055 98.6448 238.035 95.6348 238.035 95.6348C250.215 88.1098 254.205 74.9498 255.535 59.6198C258.265 33.3698 244.09 10.6198 217.875 7.8198C193.2 5.2648 175.105 22.5898 170.275 46.3198C167.65 58.0798 162.47 80.2348 169.505 99.5898C173.39 110.37 178.465 118.98 183.505 120.59C188.39 120.451 193.264 120.031 198.1 119.33C198.1 119.33 199.43 126.61 200.305 131.265C201.18 135.92 200.865 138.265 191.555 144.215C182.245 150.165 205.555 161.715 220.885 160.595C236.215 159.475 253.26 150.095 258.09 140.33C263.445 129.305 262.99 116.32 256.305 116.635Z"
                        fill="#FFCEA9" />
                    <path
                        d="M242.27 118.105C244.965 124.79 238.105 132.98 219.905 138.72C201.705 144.46 200.025 137.075 200.025 137.075C200.025 137.075 173.285 149.255 164.57 155.31C153.65 162.975 148.82 185.095 147.315 222.475C145.6 265.7 145.495 329.82 146.895 340.915C146.895 340.915 167.37 361.284 193.515 359.114C219.66 356.944 263.515 333.845 274.435 315.96C274.12 278.055 269.71 271.86 275.835 250.055C289.835 200.04 297.29 179.6 290.465 146.49C284.83 119.085 276.92 115.69 265.965 115.97C258.034 116.249 250.123 116.962 242.27 118.105Z"
                        fill="#F4F4F4" />
                    <path
                        d="M106.331 265.455C127.821 270.88 132.826 257.335 135.696 246.03C142.696 218.905 146.196 194.265 151.271 179.005C157.256 160.805 163.556 158.005 172.271 154.505C182.771 150.375 191.696 159.125 188.091 182.26C184.031 209.595 178.641 228.845 168.421 261.185C165.761 269.655 159.776 284.67 150.921 291.915C139.861 300.875 123.201 300.49 97.9307 294.225C87.1507 291.53 75.2857 285.125 54.9857 275.605C49.5257 273.05 45.2907 271.37 34.7908 266.47C24.2559 261.744 15.0214 254.539 7.87581 245.47C2.3458 237.49 1.64583 233.745 2.76583 231.925C3.88584 230.105 6.65084 230.14 9.76584 233.535C14.0252 239.174 19.2655 243.999 25.2358 247.78C25.2358 247.78 18.4458 240.78 14.7358 236.23C11.4373 232.199 8.70545 227.736 6.61584 222.965C4.65584 218.345 8.64577 212.045 11.6908 215.335C14.7358 218.625 16.2058 222.02 21.7708 228.67C24.6234 232.168 27.8907 235.306 31.5008 238.015C28.0566 233.343 24.9902 228.404 22.3308 223.245C20.0259 219.189 18.8986 214.571 19.0758 209.91C19.0758 207.495 22.5758 204.59 26.0758 209.21C29.5758 213.83 30.8358 219.71 37.6257 226.71C42.4907 231.82 46.6907 234.725 46.7957 233.325C46.9007 231.925 43.8207 229.125 42.0707 223.21C40.3207 217.295 42.0707 210.995 45.3257 210.26C48.5807 209.525 47.9857 209.735 50.6107 215.3C53.2357 220.865 57.2607 225.03 60.3057 233.045C61.9605 238.752 64.9887 243.968 69.1257 248.235C74.1307 254.08 85.7857 260.31 106.331 265.455Z"
                        fill="#FFCEA9" />
                    <path
                        d="M180.215 150.83C165.865 148.66 155.715 155.135 149.415 176.695C143.115 198.255 138.705 216.35 138.705 216.35C144.388 224.544 152.991 230.255 162.75 232.31C179.9 236.44 186.025 228.285 186.025 228.285C186.025 228.285 190.785 205.605 193.76 189.995C196.735 174.385 197.96 153.385 180.215 150.83Z"
                        fill="#EDEDED" />
                    <path d="M185.535 84.155L210.07 76.9796L209.335 75.3696L184.765 82.5446L185.535 84.155Z" fill="white" />
                    <path d="M187.495 95.7747L187.32 97.5247L207.795 97.1396L207.97 95.3896L187.495 95.7747Z"
                        fill="white" />
                    <path
                        d="M184.8 120.87C178.29 120.87 172.9 110.545 168.84 99.8696C166.136 92.3453 164.889 84.3751 165.165 76.3846C165.17 76.1928 165.223 76.0055 165.318 75.8393C165.414 75.673 165.55 75.533 165.713 75.4322C165.876 75.3318 166.062 75.2733 166.254 75.2621C166.445 75.2513 166.636 75.288 166.81 75.3696C173.235 79.3375 180.644 81.4232 188.195 81.3896L191.695 98.0496C191.695 98.0496 185.5 120.03 184.8 120.87Z"
                        fill="#EDEDED" />
                    <path
                        d="M171.221 42.8895C171.221 42.8895 148.576 8.44955 197.646 1.44957C233.066 -3.62545 255.921 18.9496 258.441 43.7995C260.961 67.3545 246.436 91.8895 235.936 101.585C230.826 103.44 219.766 104.455 205.381 98.0845C204.763 91.6291 204.529 85.1426 204.681 78.6595C204.681 78.6595 221.936 42.2945 171.221 42.8895Z"
                        fill="#3A2C6D" />
                    <path
                        d="M287.246 195.525L147.001 326.285L138.811 577.724C138.811 577.724 178.151 596.939 222.811 586.544L231.001 490.014L243.391 577.514L241.92 580.174C263.103 570.686 281.266 555.548 294.42 536.424L287.246 195.525Z"
                        fill="#F4F4F4" />
                    <path
                        d="M138.705 216.35L131.705 246.695C131.705 246.695 125.825 267.94 110.705 262.55C96.4718 256.561 82.5999 249.748 69.1603 242.145L51.0303 279.35L88.5153 296.85C88.5153 296.85 140.56 315.4 155.015 296.85C169.47 278.3 185.71 228.215 185.71 228.215L138.705 216.35Z"
                        fill="#EDEDED" />
                </g>
            </svg>
        </div>
    </div>
</template>
<script lang="ts" setup>
import { onMounted, ref } from 'vue'
import { ChronicStore } from '@/store/chronic.store'

const chroincStore = ChronicStore()
onMounted(() => {
    loadData()
})

const recordEntity = ref<any>({
    bloodPressureRecordings: [],
    educationRecordings: [],
    glycemiaRecordings: [],
    stepRecrodings: []
})

const loadData = () => {
    const token = window.localStorage.getItem("token")
    fetch(`/api/chronicDiseaseManagement/recording/${chroincStore.userId}`, {
        method: 'GET',
        headers: {
            'Content-type': 'application/json',
            token: token + ""
        }
    }).then(res => res.json())
        .then(data => {
            recordEntity.value.bloodPressureRecordings = data.data.bloodPressureRecordings
            recordEntity.value.educationRecordings = data.data.educationRecordings
            recordEntity.value.glycemiaRecordings = data.data.glycemiaRecordings
            recordEntity.value.stepRecrodings = data.data.stepRecrodings
        })
}

</script>
<style lang="scss" scoped>
.list{
    width: auto;
    display: flex;
    flex-direction: column;
    .item{
        box-sizing: border-box;
        padding: 10px;
        background-color: #E6EFF5;
        border-radius: 10px;
        
        align-items: center;
        gap: 10px;
        display: flex;
        flex-direction: row;
    }
}
table {
    border-collapse: collapse;
    width: 100%;
}

tr,
td {
    border: 1px solid black;
    padding: 8px;
    text-align: left;
}

tr {
    background-color: #fff;

    &:first-child {
        background-color: #E6EFF5;
    }
}

.record-container {
    width: 100%;
    min-height: 500px;
    border-radius: 10px;
    background-color: #fff;
    display: flex;
    flex-direction: row;
    box-sizing: border-box;
    padding: 20px;

    .tables {
        width: 60%;
        height: 100%;
        display: flex;
        flex-direction: column;
        gap: 10px;

        .title {
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 10px;

            .button {
                width: 80px;
                box-sizing: border-box;
                padding: 3px 5px;
                border-radius: 2px;
                background-color: #80AFD1;
                color: #fff;
            }
        }
    }


    .background {
        height: 40%;
        height: auto;
        display: flex;
        flex-direction: row-reverse;
    }
}
</style>